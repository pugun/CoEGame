<html>

<head>
	<link href="https://fonts.googleapis.com/css?family=Kanit" rel="stylesheet">
	<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
	<script src="./javascripts/getPost.js"></script>
	<script>
		"use strict";

		$(document).ready(function () {
			try {
				get("findPlayer", res => {
					if (res.ok) {
						res.json()
							.then(json => {
								let Opponent = json;
								console.log(Opponent);
								let table = document.getElementsByTagName("table")[0];
								for (let i = 0; i < Opponent.length; i++) {
									let tr = document.createElement("tr");
									tr.className = "";

									let tdname = document.createElement("td");
									console.log(Opponent[i].playerName);
									tdname.innerHTML = Opponent[i].playerName;
									tdname.id = Opponent[i].playerId;
									tdname.className = "left";

									let button = document.createElement("button");
									button.id = Opponent[i].playerId;
									button.className = "btn";


									let tdbutton = document.createElement("td");
									tdbutton.appendChild(button);
									tdbutton.className = "right";

									tr.appendChild(tdname);
									tr.appendChild(tdbutton);

									table.appendChild(tr);
								}
								$(".btn").click(function () {	
									console.log("Here ");
									let p1 = userInfo.id;
									let p2 = this.id;
									window.location = "/fight.html?player1=" + p1 + "&player2=" + p2;
								});

							})
							.catch(err => {
								console.log(err);
							});
					}
				});
			}
			catch (err) {
				alert(err);
			}


		})
	</script>
	<style>
		html {
			background-image: linear-gradient(#E8F5CA, #D4B82E);
			height: 100vh;
			background-size: fill;
			background-repeat: no-repeat;
			text-align: center;
			padding: 2vh;
			font-size: 30px;
			font-family: 'Kanit';
		}

		table {
			width: 100%;
			padding: 0 6vh 0 6vh;
			font-size: 70px;
			color: rgb(90, 90, 90);
		}

		td {
			height: 70px;
		}

		.right {
			text-align: right;
			vertical-align: middle;
		}

		.left {}

		.btn {
			background-image: url("/images/buttons/maing5.png");
			background-size: 100%;
			background-color: Transparent;
			border: none;
			width: 20vh;
			height: 10vh;
		}

		input[type=button]:hover,
		input[type=submit]:hover,
		.btn:hover {
			/* opacity: 1; */
			/* background: rgba(255, 255, 255, 0.8); */
		}

		h1 {
			font-size: 80px;
		}
	</style>
</head>

<body>
	<h1>Near Opponents</h1>
	<table></table>
</body>

</html>